import Head from "next/head";
import Header from "../components/Header";
import Footer from "../components/Footer";
import { getContent } from "../utils/getContent";
import Contact from "../components/Contact";
import Price from "../components/Price";
import { getImages } from "../utils/getImages";
import { GalleryRow, GalleryItem } from "../components/Gallery";
import prepareImages from "../utils/prepareImages";
import Image from "next/image";
import { useState } from "react";
import Slider from "../components/Slider";

export default function Index({ content, images }) {
  const [showSlider, setShowSlider] = useState(false);
  const [currentSlide, setCurrentSlide] = useState(0);

  const openSlider = (src) => {
    if (!src) {
      return;
    }

    document.body.style.overflow = "hidden";
    setShowSlider(true);
    setCurrentSlide(images.indexOf(src));
  };

  const closeSlider = () => {
    document.body.style.overflow = "auto";
    setShowSlider(false);
  };

  return (
    <>
      <Head>
        <title>Olga - творческая оклейка автомобилей</title>
      </Head>
      <Header />
      <h1>
        <span className="colorful">Живописные</span>
        <span>наклейки</span>
        <span>на&nbsp;автомобиль</span>
      </h1>
      <section id="gallery">
        <h3>Сделано</h3>
        {showSlider && (
          <Slider
            images={images}
            onClick={closeSlider}
            currentSlide={currentSlide}
          />
        )}
        {prepareImages(images).map((row, i) => (
          <GalleryRow key={i}>
            {row.map((src, j) => (
              <GalleryItem onClick={() => openSlider(src)} key={j}>
                {src && (
                  <Image alt="" objectFit="cover" src={src} layout="fill" />
                )}
              </GalleryItem>
            ))}
          </GalleryRow>
        ))}
      </section>
      <section id="prices">
        <h3>Цены</h3>
        <div className="prices">
          <Price
            alt=""
            src="06082021-002005-1.jpg"
            title="Простая наклейка"
            price={`от ${content.simplePrice} рублей`}
          >
            <svg
              width="400"
              height="328"
              viewBox="0 0 164 92"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className="prices-emoji"
            >
              <path
                d="M136.68 36.4269H150.34L159.447 9.10672H145.787L136.68 36.4269Z"
                fill="#414042"
              />
              <path
                d="M132.126 18.2134C132.126 18.2134 118.466 0 113.913 0H72.9328L45.6126 22.7668L17.9236 30.8263C15.1005 31.8143 11.3212 33.7222 10.8204 36.4269L0.0789764 81.9605C-0.490194 84.902 2.11888 86.5139 4.63234 86.5139H159.447C161.965 86.5139 164 84.4785 164 81.9605V27.3202C164 18.2134 132.126 18.2134 132.126 18.2134Z"
                fill="#F4900C"
              />
              <path
                d="M73.3607 22.7668L50.1659 86.5139H104.806L127.573 22.7668H73.3607Z"
                fill="#3B88C3"
              />
              <path
                d="M36.5058 91.0672C46.5648 91.0672 54.7192 82.9128 54.7192 72.8538C54.7192 62.7948 46.5648 54.6404 36.5058 54.6404C26.4468 54.6404 18.2924 62.7948 18.2924 72.8538C18.2924 82.9128 26.4468 91.0672 36.5058 91.0672Z"
                fill="#292F33"
              />
              <path
                d="M36.5058 81.9605C41.5353 81.9605 45.6126 77.8833 45.6126 72.8538C45.6126 67.8243 41.5353 63.7471 36.5058 63.7471C31.4763 63.7471 27.3991 67.8243 27.3991 72.8538C27.3991 77.8833 31.4763 81.9605 36.5058 81.9605Z"
                fill="#58595B"
              />
              <path
                d="M132.126 91.0672C142.185 91.0672 150.34 82.9128 150.34 72.8538C150.34 62.7948 142.185 54.6404 132.126 54.6404C122.067 54.6404 113.913 62.7948 113.913 72.8538C113.913 82.9128 122.067 91.0672 132.126 91.0672Z"
                fill="#292F33"
              />
              <path
                d="M132.126 81.9605C137.156 81.9605 141.233 77.8833 141.233 72.8538C141.233 67.8243 137.156 63.7471 132.126 63.7471C127.097 63.7471 123.02 67.8243 123.02 72.8538C123.02 77.8833 127.097 81.9605 132.126 81.9605Z"
                fill="#58595B"
              />
              <path
                d="M88.8695 68.3004C97.6711 68.3004 104.806 61.1653 104.806 52.3636C104.806 43.562 97.6711 36.4269 88.8695 36.4269C80.0678 36.4269 72.9327 43.562 72.9327 52.3636C72.9327 61.1653 80.0678 68.3004 88.8695 68.3004Z"
                fill="white"
              />
              <path
                d="M95.95 46.6355C95.95 48.6436 95.0848 50.3966 93.3363 51.5167C95.6312 52.564 97.2249 54.6995 97.2249 57.2266C97.2249 61.0515 93.7234 64.2707 89.1928 64.2707C84.4709 64.2707 81.534 60.7919 81.534 58.2785C81.534 57.0354 82.8408 56.1429 83.9883 56.1429C86.1602 56.1429 85.6457 59.8676 89.252 59.8676C90.9048 59.8676 92.2481 58.5972 92.2481 56.9079C92.2481 52.4456 86.825 55.724 86.825 51.963C86.825 48.6208 91.3556 50.8793 91.3556 47.3367C91.3556 46.1255 90.4996 45.2012 89.0562 45.2012C86.0282 45.2012 86.4425 48.3248 84.2751 48.3248C82.9638 48.3248 82.1988 47.1501 82.1988 45.9662C82.1988 43.4755 85.6138 40.7981 89.1518 40.7981C93.7461 40.8027 95.95 44.1539 95.95 46.6355V46.6355Z"
                fill="#231F20"
              />
              <path
                d="M136.68 13.6601L141.233 9.10673L164 4.55337V13.6601H136.68Z"
                fill="#F4900C"
              />
              <path
                d="M77.4861 4.55337H113.913V22.7668H54.7193L77.4861 4.55337Z"
                fill="#88C9F9"
              />
              <path
                d="M27.3991 40.9802C27.3991 43.4983 25.3592 45.5336 22.8457 45.5336H13.739C11.2255 45.5336 9.18564 43.4983 9.18564 40.9802C9.18564 38.4622 11.2255 36.4269 13.739 36.4269H22.8457C25.3592 36.4269 27.3991 38.4622 27.3991 40.9802Z"
                fill="#FFCC4D"
              />
              <path
                d="M164 31.8735H159.447C156.929 31.8735 154.893 33.9089 154.893 36.4269V40.9803C154.893 43.4983 156.929 45.5336 159.447 45.5336H164V31.8735Z"
                fill="#DD2E44"
              />
            </svg>
          </Price>
          <Price
            right
            alt=""
            src="06082021-002005-1.jpg"
            title="Универсал, каблучок"
            price={`от ${content.universalPrice} рублей`}
          >
            <svg
              width="400"
              height="346"
              viewBox="0 0 164 110"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className="prices-emoji"
            >
              <path
                d="M164 59.2222C164 61.7414 161.964 63.7778 159.444 63.7778H154.889C152.37 63.7778 150.333 61.7414 150.333 59.2222V31.8889C150.333 29.3697 152.37 27.3333 154.889 27.3333H159.444C161.964 27.3333 164 29.3697 164 31.8889V59.2222Z"
                fill="#292F33"
              />
              <path
                d="M22.7778 91.1111H141.222C145.778 91.1111 154.889 86.5556 154.889 72.8889C154.889 63.7778 154.889 36.4444 150.333 31.8889C145.778 27.3333 150.333 0 132.111 0H68.3333C54.6667 0 41 31.8889 41 31.8889L22.7778 36.4444C22.7778 36.4444 4.55556 41 4.55556 54.6667V68.3333C4.55556 68.3333 0 69.8731 0 77.2486C0 84.624 4.55556 86.5556 4.55556 86.5556L22.7778 91.1111Z"
                fill="#3B88C3"
              />
              <path
                d="M41 109.333C51.0638 109.333 59.2222 101.175 59.2222 91.1111C59.2222 81.0473 51.0638 72.8889 41 72.8889C30.9361 72.8889 22.7778 81.0473 22.7778 91.1111C22.7778 101.175 30.9361 109.333 41 109.333Z"
                fill="#292F33"
              />
              <path
                d="M41 100.222C46.032 100.222 50.1111 96.143 50.1111 91.1111C50.1111 86.0792 46.032 82 41 82C35.9681 82 31.8889 86.0792 31.8889 91.1111C31.8889 96.143 35.9681 100.222 41 100.222Z"
                fill="#CCD6DD"
              />
              <path
                d="M123 109.333C133.064 109.333 141.222 101.175 141.222 91.1111C141.222 81.0473 133.064 72.8889 123 72.8889C112.936 72.8889 104.778 81.0473 104.778 91.1111C104.778 101.175 112.936 109.333 123 109.333Z"
                fill="#292F33"
              />
              <path
                d="M123 100.222C128.032 100.222 132.111 96.143 132.111 91.1111C132.111 86.0792 128.032 82 123 82C117.968 82 113.889 86.0792 113.889 91.1111C113.889 96.143 117.968 100.222 123 100.222Z"
                fill="#CCD6DD"
              />
              <path
                d="M109.333 27.3333C109.333 29.848 111.37 31.8889 113.889 31.8889H132.111C134.63 31.8889 136.667 29.848 136.667 27.3333V13.6667C136.667 11.152 134.63 9.11111 132.111 9.11111H113.889C111.37 9.11111 109.333 11.152 109.333 13.6667V27.3333ZM59.2222 27.3333C59.2222 31.8889 61.2631 31.8889 63.7778 31.8889H95.6667C98.1859 31.8889 100.222 29.848 100.222 27.3333V13.6667C100.222 11.152 98.1859 9.11111 95.6667 9.11111H72.8889C68.3333 9.11111 59.2222 22.7778 59.2222 27.3333Z"
                fill="#BBDDF5"
              />
              <path
                d="M145.778 56.9444C145.778 60.7164 142.716 63.7778 138.944 63.7778H38.7222C34.9457 63.7778 31.8889 60.7164 31.8889 56.9444C31.8889 53.1679 34.9457 50.1111 38.7222 50.1111H138.944C142.716 50.1111 145.778 53.1679 145.778 56.9444Z"
                fill="#55ACEE"
              />
            </svg>
          </Price>
          <Price
            alt=""
            src="06082021-002005-1.jpg"
            title="Микроавтобус, автобус, грузовик"
            price={`от ${content.busPrice} рублей`}
          >
            <svg
              width="400"
              height="400"
              viewBox="0 0 164 164"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className="prices-emoji"
            >
              <path
                d="M50.1111 154.889C50.1111 159.918 46.0294 164 41 164H31.8889C26.8596 164 22.7778 159.918 22.7778 154.889V123C22.7778 117.971 26.8596 113.889 31.8889 113.889H41C46.0294 113.889 50.1111 117.971 50.1111 123V154.889ZM141.222 154.889C141.222 159.918 137.14 164 132.111 164H123C117.971 164 113.889 159.918 113.889 154.889V123C113.889 117.971 117.971 113.889 123 113.889H132.111C137.14 113.889 141.222 117.971 141.222 123V154.889Z"
                fill="#292F33"
              />
              <path
                d="M13.6667 77.4444C13.6667 79.9637 11.6258 82 9.11111 82H4.55556C2.04089 82 0 79.9637 0 77.4444V45.5556C0 43.0409 2.04089 41 4.55556 41H9.11111C11.6258 41 13.6667 43.0409 13.6667 45.5556V77.4444ZM164 77.4444C164 79.9637 161.964 82 159.444 82H154.889C152.37 82 150.333 79.9637 150.333 77.4444V45.5556C150.333 43.0409 152.37 41 154.889 41H159.444C161.964 41 164 43.0409 164 45.5556V77.4444Z"
                fill="#99AAB5"
              />
              <path
                d="M159.444 50.1111C159.444 52.6258 157.408 54.6667 154.889 54.6667H9.1111C6.59643 54.6667 4.55554 52.6258 4.55554 50.1111C4.55554 47.5964 6.59643 45.5556 9.1111 45.5556H154.889C157.408 45.5556 159.444 47.5964 159.444 50.1111ZM159.444 68.3333C159.444 70.8526 157.408 72.8889 154.889 72.8889H9.1111C6.59643 72.8889 4.55554 70.8526 4.55554 68.3333C4.55554 65.8141 6.59643 63.7778 9.1111 63.7778H154.889C157.408 63.7778 159.444 65.8141 159.444 68.3333Z"
                fill="#99AAB5"
              />
              <path
                d="M109.333 9.11111C109.333 14.1404 105.252 18.2222 100.222 18.2222H63.7778C58.7484 18.2222 54.6667 14.1404 54.6667 9.11111C54.6667 4.08178 58.7484 0 63.7778 0H100.222C105.252 0 109.333 4.08178 109.333 9.11111Z"
                fill="#CCD6DD"
              />
              <path
                d="M127.556 9.11111H36.4444C26.3812 9.11111 18.2222 17.2701 18.2222 27.3333V145.778H145.778V27.3333C145.778 17.2701 137.619 9.11111 127.556 9.11111Z"
                fill="#CCD6DD"
              />
              <path
                d="M18.2222 72.8889H145.778V145.778H18.2222V72.8889Z"
                fill="#FFCC4D"
              />
              <path
                d="M150.333 145.778C150.333 148.297 148.297 150.333 145.778 150.333H18.2222C15.7075 150.333 13.6667 148.297 13.6667 145.778V141.222C13.6667 138.703 15.7075 136.667 18.2222 136.667H145.778C148.297 136.667 150.333 138.703 150.333 141.222V145.778ZM145.778 77.4444C145.778 84.993 139.66 91.1111 132.111 91.1111H31.8889C24.3403 91.1111 18.2222 84.993 18.2222 77.4444V45.5556C18.2222 38.007 24.3403 31.8889 31.8889 31.8889H132.111C139.66 31.8889 145.778 38.007 145.778 45.5556V77.4444Z"
                fill="#66757F"
              />
              <path
                d="M136.667 72.8889C136.667 77.9182 132.585 82 127.556 82H36.4445C31.4151 82 27.3333 77.9228 27.3333 72.8889V50.1111C27.3333 45.0818 31.4151 41 36.4445 41H127.556C132.585 41 136.667 45.0772 136.667 50.1111V72.8889Z"
                fill="#88C9F9"
              />
              <path
                d="M18.2222 113.889H145.778V136.667H18.2222V113.889Z"
                fill="#FFAC33"
              />
              <path
                d="M27.3333 113.889H54.6667V127.556H27.3333V113.889ZM109.333 113.889H136.667V127.556H109.333V113.889Z"
                fill="white"
              />
              <path
                d="M18.2222 113.889H27.3333V127.556H18.2222V113.889ZM136.667 113.889H145.778V127.556H136.667V113.889Z"
                fill="#DD2E44"
              />
              <path
                d="M63.7778 113.889H100.222V127.556H63.7778V113.889Z"
                fill="#66757F"
              />
              <path
                d="M100.222 15.9444C100.222 19.721 97.1609 22.7778 93.3889 22.7778H70.6111C66.8346 22.7778 63.7778 19.721 63.7778 15.9444C63.7778 12.1679 66.8346 9.11111 70.6111 9.11111H93.3889C97.1609 9.11111 100.222 12.1679 100.222 15.9444Z"
                fill="#292F33"
              />
            </svg>
          </Price>
        </div>
      </section>
      <section id="contacts">
        <h3>Контакты</h3>
        <div className="contacts">
          <Contact alt="WhatsApp" text={content.whatsapp} src="whatsapp" />
          <Contact alt="Instagram" text={content.instagram} src="instagram" />
          <Contact alt="E-mail" text={content.email} src="email" />
        </div>
      </section>
      <Footer />
      <style jsx>{`
        h1 {
          padding-top: 130px;
          margin: 0 auto;
          color: var(--to-color);
          text-align: center;
          font-size: 80px;
        }

        h3 {
          text-align: center;
          font-size: 40px;
          padding-top: 100px;
          margin-top: 0;
        }

        @media (max-width: 720px) {
          h1 {
            font-size: 55px;
          }

          h3 {
            font-size: 40px;
          }
        }

        @media (max-width: 520px) {
          h1 {
            font-size: 45px;
          }

          h3 {
            font-size: 30px;
          }

          .prices-emoji {
            width: 200px;
            height: 200px;
          }
        }

        @media (max-width: 420px) {
          h1 {
            font-size: 35px;
          }
        }

        section {
          max-width: 1024px;
          margin: 0 auto;
          padding: 0 20px;
        }

        #gallery {
          padding: 0;
        }

        .image-row {
          display: flex;
          padding-bottom: 20px;
        }

        .image-row:last-child {
          padding-bottom: 0;
        }

        .prices {
          display: flex;
          flex-direction: column;
        }

        span {
          display: block;
        }

        .colorful {
          background-image: linear-gradient(
            to right,
            var(--from-color),
            var(--to-color)
          );
          color: transparent;
          background-clip: text;
        }

        .contacts {
          margin: 200px 0;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        @media (max-width: 580px) {
          .contacts {
            flex-direction: column;
            margin: 50px 0;
          }
        }
      `}</style>
    </>
  );
}

export async function getStaticProps() {
  const content = await getContent();
  const images = await getImages();

  return {
    props: { content, images },
    revalidate: 60,
  };
}
